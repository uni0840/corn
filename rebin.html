<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rebin Barcode Generator </title>
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      text-align: center;
    }
    .row {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .row input {
      margin: 5px;
      padding: 8px;
      font-size: 16px;
    }
    button {
      padding: 8px 15px;
      font-size: 16px;
      margin: 5px;
    }
    #barcode {
      margin-top: 20px;
    }
    #resultText {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>바코드 생성기</h2>

  <!-- 리빈작업대 -->
  <div class="row">
    <input type="number" id="rbdInput" placeholder="리빈작업대" min="1" max="99" />
    <button onclick="generateBarcode('rbd')">생성</button>
  </div>

  <!-- 리빈월 + 리빈셀 -->
  <div class="row">
    <input type="number" id="rbwInput" placeholder="리빈월" min="1" max="99" />
    <input type="text" id="rbwCellInput" placeholder="리빈셀" />
    <button onclick="generateBarcode('rbw')">생성</button>
  </div>

  <svg id="barcode"></svg>
  <div id="resultText"></div>

  <script>
    function generateBarcode(type) {
      let code = "";
      let textResult = "";

      if (type === "rbd") {
        const val = document.getElementById("rbdInput").value.trim();
        if (!val) {
          document.getElementById("resultText").textContent = "결괏값을 찾을 수 없습니다.";
          document.getElementById("barcode").innerHTML = "";
          return;
        }
        code = "RBS00000061" + String(val).padStart(2, "0");
        textResult = code;
      } 
      else if (type === "rbw") {
        const monthVal = document.getElementById("rbwInput").value.trim();
        const cellVal = document.getElementById("rbwCellInput").value.trim().toUpperCase();

        if (!monthVal) {
          document.getElementById("resultText").textContent = "결괏값을 찾을 수 없습니다.";
          document.getElementById("barcode").innerHTML = "";
          return;
        }

        const baseCode = "RBW00000093" + String(monthVal).padStart(2, "0");

        if (cellVal) {
          code = baseCode + "-" + cellVal + "-1";
        } else {
          code = baseCode;
        }
        textResult = code;
      }

      JsBarcode("#barcode", code, {
        format: "CODE128",
        width: 2,
        height: 60,
        displayValue: true
      });
      document.getElementById("resultText").textContent = textResult;
    }
  </script>
</body>
</html>
